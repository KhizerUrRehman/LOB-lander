<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Request Account Deletion • League of Basketball (LOB)</title>
    <meta
      name="description"
      content="Request Account Deletion for the League of Basketball (LOB) mobile app."
    />
    <link rel="icon" type="image/png" href="images/LOB.png" />

    <style>
      :root {
        --bg: #000000;
        --card: #121212;
        --muted: #9aa0a6;
        --text: #ffffff;
        --accent: #0288d1;
        --border: #242424;
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        padding: 0;
      }

      body {
        font-family: ui-sans-serif, -apple-system, Segoe UI, Roboto, Arial,
          "Noto Sans", "Helvetica Neue", system-ui, sans-serif;
        background: var(--bg);
        color: var(--text);
        padding: 20px;
        min-height: 100vh;
        box-sizing: border-box;
      }

      @media (max-width: 768px) {
        body {
          padding: 16px;
        }
      }

      @media (max-width: 480px) {
        body {
          padding: 12px;
        }
      }

      .container {
        width: 100%;
        max-width: 980px;
        margin: 0 auto;
      }

      .card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 32px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        width: 100%;
        margin: 20px 0;
        box-sizing: border-box;
      }

      @media (max-width: 768px) {
        .card {
          padding: 24px;
          border-radius: 12px;
          margin: 16px 0;
        }
      }

      @media (max-width: 480px) {
        .card {
          padding: 20px;
          border-radius: 8px;
          margin: 12px 0;
        }
      }

      header {
        display: flex;
        align-items: center;
        gap: 16px;
        margin-bottom: 8px;
      }

      @media (max-width: 480px) {
        header {
          flex-direction: column;
          text-align: center;
          gap: 12px;
        }
      }

      .logo {
        width: 64px;
        height: 64px;
        border-radius: 12px;
        object-fit: contain;
        border: 1px solid var(--border);
        background: #0b0b0b;
        padding: 6px;
        flex-shrink: 0;
      }

      @media (max-width: 480px) {
        .logo {
          width: 56px;
          height: 56px;
        }
      }

      h1 {
        font-size: clamp(1.5rem, 4vw, 2.25rem);
        margin: 0;
        color: var(--accent);
        letter-spacing: 0.2px;
        line-height: 1.2;
      }

      @media (max-width: 480px) {
        h1 {
          font-size: 1.75rem;
        }
      }

      .subtitle {
        color: var(--muted);
        margin: 0 0 24px 0;
        font-size: 0.975rem;
        line-height: 1.4;
      }

      @media (max-width: 768px) {
        .subtitle {
          margin: 0 0 20px 0;
          font-size: 0.9rem;
        }
      }

      p {
        line-height: 1.7;
        color: #e7e7e7;
      }

      @media (max-width: 768px) {
        p {
          line-height: 1.6;
          font-size: 0.95rem;
        }
      }

      .divider {
        height: 1px;
        background: var(--border);
        margin: 20px 0;
      }

      .muted {
        color: var(--muted);
        font-size: 0.95rem;
      }

      footer {
        margin-top: 28px;
        color: var(--muted);
        font-size: 0.9rem;
      }

      .form {
        margin: 24px 0;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-label {
        display: block;
        color: var(--text);
        font-size: 0.95rem;
        font-weight: 500;
        margin-bottom: 6px;
      }

      .form-input,
      .form-textarea {
        width: 100%;
        background: #0b0b0b;
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 12px 16px;
        color: var(--text);
        font-size: 0.95rem;
        font-family: inherit;
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
        -webkit-appearance: none;
        appearance: none;
      }

      @media (max-width: 768px) {
        .form-input,
        .form-textarea {
          padding: 14px 16px;
          font-size: 16px; /* Prevents zoom on iOS */
        }
      }

      .form-input:focus,
      .form-textarea:focus {
        outline: none;
        border-color: var(--accent);
        box-shadow: 0 0 0 3px rgba(2, 136, 209, 0.1);
      }

      .form-textarea {
        resize: vertical;
        min-height: 100px;
      }

      .form-input::placeholder,
      .form-textarea::placeholder {
        color: var(--muted);
      }

      .btn {
        background: var(--accent);
        color: #fff;
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        font-size: 0.95rem;
        font-weight: 600;
        cursor: pointer;
        transition: background-color 0.2s ease;
        width: 100%;
        -webkit-appearance: none;
        appearance: none;
      }

      @media (max-width: 768px) {
        .btn {
          padding: 16px 24px;
          font-size: 16px;
          font-weight: 600;
        }
      }

      @media (min-width: 769px) {
        .btn {
          width: auto;
          min-width: 200px;
        }
      }

      .btn:hover {
        background: #0277bd;
      }

      .btn:disabled {
        background: #333;
        cursor: not-allowed;
      }
    </style>
  </head>
  <body>
    <main class="container">
      <section class="card" aria-labelledby="page-title">
        <header>
          <img
            src="images/LOB.png"
            alt="League of Basketball (LOB) logo"
            class="logo"
          />
          <div>
            <h1 id="page-title">Request Account Deletion</h1>
            <p class="subtitle">
              for the League of Basketball (LOB) mobile application
            </p>
          </div>
        </header>

        <div class="divider" role="separator" aria-hidden="true"></div>

        <p>
          To request account deletion for your League of Basketball (LOB)
          account, please fill out the form below. We will process your request
          and confirm the deletion within 48 hours.
        </p>

        <form class="form" id="deletionForm">
          <div class="form-group">
            <label for="name" class="form-label">Full Name *</label>
            <input
              type="text"
              id="name"
              name="name"
              class="form-input"
              placeholder="Enter your full name"
              required
            />
          </div>

          <div class="form-group">
            <label for="email" class="form-label">Email Address *</label>
            <input
              type="email"
              id="email"
              name="email"
              class="form-input"
              placeholder="Enter your email address"
              required
            />
          </div>

          <div class="form-group">
            <label for="description" class="form-label"
              >Reason for Deletion (Optional)</label
            >
            <textarea
              id="description"
              name="description"
              class="form-textarea"
              placeholder="Please provide any additional details or reasons for account deletion..."
            ></textarea>
          </div>

          <button type="submit" class="btn">Submit Deletion Request</button>
        </form>

        <div class="divider" role="separator" aria-hidden="true"></div>

        <footer>
          <span
            >© <span id="year"></span> League of Basketball (LOB). All rights
            reserved.</span
          >
          <span class="muted"
            >This page is provided for informational purposes and does not
            constitute legal advice.</span
          >
        </footer>
      </section>
    </main>

    <script>
      // Set current year in footer
      document.getElementById("year").textContent = new Date().getFullYear();

      // Handle form submission
      document
        .getElementById("deletionForm")
        .addEventListener("submit", function (e) {
          e.preventDefault(); // Prevent default form submission

          // Capture form data
          const formData = {
            name: document.getElementById("name").value.trim(),
            email: document.getElementById("email").value.trim(),
            reason: document.getElementById("description").value.trim(),
          };

          // Send POST request to Django endpoint
          fetch(
            "https://lob-hub.autonomoustech.io/api/v1/account-deletion-request/",
            {
              method: "POST",
              headers: { 
                "Content-Type": "application/json",
                "Authorization": "Token 1fc60fd792b0a3383857dd66657e5c6b25a0c973"
              },
              body: JSON.stringify(formData),
            }
          )
            .then((response) => {
              if (!response.ok) {
                throw new Error("Failed to submit request. Please try again.");
              }
              return response.json();
            })
            .then((data) => {
              alert(
                "✅ Your account deletion request has been submitted successfully."
              );
              document.getElementById("deletionForm").reset();
            })
            .catch((error) => {
              console.error("Error:", error);
              alert(
                "❌ There was an error submitting your request. Please try again later."
              );
            });

          // Optional: Reset form after submission
          this.reset();

          // You can replace the above with actual form submission logic:
          // - Send data to your backend API
          // - Show a success page
          // - Send confirmation email
          // Example:
          // fetch('/api/delete-account', {
          //   method: 'POST',
          //   headers: { 'Content-Type': 'application/json' },
          //   body: JSON.stringify(formData)
          // });
        });
    </script>
  </body>
</html>
